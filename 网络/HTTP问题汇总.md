##### HTTP报文结构

1. 请求行（请求）：方法、URL、HTTP版本。
2. 状态行（响应）：HTTP版本、状态码。
3. 首部字段
   1. 通用首部：请求报文和响应报文都会使用的首部。
   2. 请求首部：包含请求附加内容、客户端信息、响应内容相关优先级等信息。
   3. 响应首部：包含响应附加内容，要求客户端附加额外信息。
   4. 实体首部：资源内容更新时间等和实体有关的信息。
4. 空行
5. 报文主体

##### 状态码

1. 1xx：请求正在处理。
2. 2xx：请求处理成功。
   1. 200 OK
   2. 204 no content 无数据
   3. 206 partial content 部分请求
3. 3xx：重定向
   1. 301 moved permanenly 请求资源永久重定向，客户端会同步更新URL。
   2. 302 found 资源临时重定向（POST重定向、POST重定向为GET）。
   3. 303 see other POST重定向为GET。
   4. 304 not modified 当客户端附带If-Modified-Since 和 If-None-Match访问资源时，服务端资源没有修改。
   5. 307 temporary redirect POST重定向。
4. 4xx：客户端问题
   1. 400 bad request 请求内容有问题。
   2. 401 unauthorized 因权限问题无法访问，原因都不想告诉客户端。
   3. 403 forbidden 拒绝访问，拒绝原因在body中。
   4. 412 precomdition failed 提前失败。

##### HTTP和HTTPS的区别

1. 报文：HTTP协议是超文本传输协议，信息是明文传输。HTTPS是加密传输。
2. 端口：HTTP使用80端口，HTTPS使用403端口。

##### HTTPS请求过程

1. 请求服务端，服务端确认加密、hash算法，并返回数字证书。
2. 客户端校验证书，校验不通过结束。
3. 客户端生成随机秘钥R，使用服务端公钥加密后发送到服务端。
4. 服务端使用秘钥解密获取秘钥R，使用秘钥R加密网页内容并返回。
5. 客户端使用秘钥R解密获取网页内容。

##### 数字证书

1. 内容：签发者、服务端的域名、公钥、加密算法、hash算法、证书有效期，摘要：数字前面等。
2. 数字签名：将上面的内容生成摘要，然后用CA私钥加密，得到数字签名。
3. 验证：使用CA公钥解密数字签名得到摘要，使用同样的hash算法进行摘要，比较两次摘要是否一致。

##### 证书信任链

客户端唯一能信任的是根证书，通过根证书A校验证书B，证书B校验证书C，依次构成信任链。

1. 客户端得到服务端的证书，提取服务端证书的发布机构。
2. 查找服务端证书的发布机构，如果不是根证书就继续递归下去直到拿到根证书。
3. 使用根证书校验上一层证书的签名，再拿上一层证书校验更上一层的证书。
4. 最终可以验证服务端证书是否可信。

##### cookie和Session区别

1. cookie数据存放在客户的浏览器上，session数据放在服务器上。
2. cookie不是很安全，别人可以分析存放在本地的cookie并进行cookie欺骗，考虑到安全应当使用session。
3. session会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能，考虑到减轻服务器性能方面，应当使用cookie。
4. 单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie。
5. 可以考虑将登陆信息等重要信息存放为session，其他信息如果需要保留，可以放在cookie中。

##### Get和Post的区别

1. 浏览器中Get请求会被缓存，Get请求不带body。
2. 接口中Get请求表示获取资源或者资源列表，Post请求表示创建资源。
3. 安全性：私密数据需要使用Post传输。
4. 编码：URL中会使用urlencode，Post中请求可以通过Content-Type定义body格式。
5. Post请求在部分浏览器器中会将请求头和请求体分别发送。

##### CSRF攻击

1. 攻击者在自己的网页中向服务端发送请求时浏览器会带上用户的cookie，服务端只认cookie，无法分别是谁发出的请求。
2. 解决办法：利用攻击者无法访问cookie内容这个点进行防范，用户登录时生成一个token存在cookie中，向服务器发送请求是需要带上这个token，服务器校验请求中token和cookie中的token是否一致。

##### keep-alive作用

1. HTTP/1.0中加入`Connection: keep-alive`请求头告诉对方不要关闭连接。
2. HTTP/1.1中默认保持长连接，如果要关闭长连接需要加上`Connection: close`请求头。
3. 服务端可以设置keep-alive超时时间当连接唱过指定时间会主动关闭，以及最大请求数当请求超过指定次数会主动关闭连接。

##### 请求头

1. content-length: 可以确定带传输内容的字节长度。
2. transfer-encoding：传输编码
   1. chunked：表示输出的内容长度不能确定，把要发送的数据切块传输，每个分块包含：长度值、数据、结尾\r\n。最后一个分块的长度必须为0。
3. content-encoding：内容编码，通常是指对实体内容进行压缩编码，目的是优化传输。
4. 

