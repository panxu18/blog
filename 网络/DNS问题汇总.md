##### DNS

1. 报文：DNS使用UDP报文。
2. 查询方式：递归查询、迭代查询。

##### DNS过程

1. 向本地域名服务器查询。
2. 本地域名服务区使用迭代查询，查询根域名服务器。
3. 本地域名服务器向顶级域名服务器查询。
4. 本地域名服务器权限服务器查询，获得IP地址。

##### DNS攻击

1. 欺骗原理：Client发起查询时会生产一个随机的序列号ID，将ID发送到Server，Server域名解析之后返回的响应包也需要携带这个随机ID，Client通过对比这个ID判断是否是自己发出的请求。
2. 序列号攻击：攻击者会使用client的序列号发生虚假的映射，client收到攻击者的响应之后就会丢弃后面到达的真是响应。
3. 防范：
   1. 被动检测：如果在限定之间段内收到两个相同响应，则可能是产生DNS欺骗。
   2. 主动试探：主动发送验证包，通常不会收到响应，而攻击者会了client先收到自己伪造响应，通常不会校验DNS Server的IP合法性，继续实施欺骗，若收到应答包，说明收到了攻击。