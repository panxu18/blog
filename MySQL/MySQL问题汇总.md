##### SQL执行过程

1. 链接器：身份认证、权限相关等。
2. 查询缓存：将SQL作为key进行缓存，如果表中数据被更新了，会清空该表上的缓存。
3. 分析器：词法分析、语法分析。
4. 优化器：选择索引、选择关联顺序等。
5. 执行器：调用执行引擎的接口。
6. 存储引擎

##### MySQL主从复制原理

1. 将数据的操作信息**写入到 bin log **。
2. 主数据库会有一个IO线程将binlog日志中的数据同步到从数据库的relay log。
3. 从数据库再通过自己数据库内的SQL线程将 relay log 日志中的数据写入到数据库。

##### 主从复制3种方式

1. 异步复制：主库在执行完成客户端提交的事务后会立刻将结果返回客户端，不关心从库接收的结果。
   1. 优点：返回客户端无延迟。
   2. 缺点：主从数据不一致，主从切换时数据丢失。
2. 半同步复制：主库保证**至少有一个**从库接收并写入relay log之后才能将结果返回给客户端。
   1. 优点：
   2. 缺点：返回客户端有延时。
3. 全同步复制：主库保证**所有**一个从库接收并写入relay log之后才能将结果返回给客户端。
   1. 优点：主从数据强一致性。
   2. 缺点：性能差。
4. 并行复制：在半同步复制的基础上，从库使用多个线程将relay log写入数据库中，尽量缓解同步赋值的延时。

##### 分区表

1. 分区表的作用：
   1. 表非常大无法全部存到内存中。
   2. 维护方便，可以对单独一个分区进行优化、检查，备份、删除等操作。
   3. 解决特殊场景的瓶颈：innodb的单个索引互斥访问，ext3文件系统的inode锁竞争。
   4. 优化查询，where字句中包含分区列时，可以只是用必要的分区提高查询效率，书记到聚合函数查询是，可以在每个分区上并行处理后汇总。
2. 分区表类型：range、list、hash、key
3. 分区表和分表的区别：
   1. 分表是将一个表分为多个小表；分区逻辑上仍然是一个表，只是存放数据的区块变多了。
   2. 分表是为了提高MySQL的并发能力；分区是为了提高磁盘的读写能力，提高MySQL的性能。
   3. 分表实现复杂；分区有MySQL管理使用简单。



